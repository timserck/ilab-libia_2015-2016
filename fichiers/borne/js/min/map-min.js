function initAutocomplete(){function e(){function e(e){if(1==e){n=a;var o=new google.maps.Marker({position:a,map:i,title:"votre position",icon:"https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=|20D699"})}else n=a;i.setCenter(n)}navigator.geolocation?(browserSupportFlag=!0,navigator.geolocation.getCurrentPosition(function(e){n=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),i.setCenter(n);var o=new google.maps.Marker({position:n,map:i,title:"votre position",icon:"https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=|20D699"})},function(){e(browserSupportFlag)})):(browserSupportFlag=!1,e(browserSupportFlag))}function o(e){var o={destination:e,origin:n,travelMode:google.maps.TravelMode.BICYCLING},t=new google.maps.DirectionsService;t.route(o,function(e,o){o==google.maps.DirectionsStatus.OK&&(m.setDirections(e),m.setOptions({polylineOptions:{strokeColor:"#20D699"},preserveViewport:!0,suppressMarkers:!0}))})}var t=[{stylers:[{hue:"#00ffe6"},{saturation:-20}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}],n,a={lat:50.465541,lng:4.877951},r=new google.maps.StyledMapType(t,{name:"Styled Map"}),s={zoom:17,maxZoom:17,minZoom:14,center:a,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}},i=new google.maps.Map(document.getElementById("map"),s);i.mapTypes.set("map_style",r),i.setMapTypeId("map_style"),e();var p=document.getElementById("pac-input"),l={regions:{country:"be",postal_code:"5000"}};p.placeholder="Rechercher une adresse";var g=new google.maps.places.SearchBox(p);i.controls[google.maps.ControlPosition.TOP_RIGHT].push(p,l),i.addListener("bounds_changed",function(){g.setBounds(i.getBounds())});var c=[];g.addListener("places_changed",function(){var e=g.getPlaces();if(0!=e.length){c.forEach(function(e){e.setMap(null)}),c=[];var o=new google.maps.LatLngBounds;e.forEach(function(e){var t={url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};c.push(new google.maps.Marker({map:i,icon:t,title:e.name,position:e.geometry.location})),e.geometry.viewport?o.union(e.geometry.viewport):o.extend(e.geometry.location)}),i.fitBounds(o)}});var m=new google.maps.DirectionsRenderer({map:i});$.getJSON("namur.json",function(e){$.each(e,function(e,t){var n=t.number,a,r="3A93C4";if(n>10)var a="3A93C4";else var a="92B0C9";var s=new google.maps.LatLng(t.latitude,t.longitude),p=new google.maps.Marker({position:s,map:i,title:t.address,icon:"https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld="+n+"|"+a+"|FFF"});google.maps.event.addDomListener(p,"click",function(){var e=[],n=t.number+Math.floor(5*Math.random()+1);e.push(t.address,n,t.number),$(".borneNom").text(e[0]),$(".borneVeloRestant").text(e[2]),$(".borneVeloTotal").text(e[1]),$(".borneProxi").text("Borne sélectionnée");var a=p.getPosition();o(a)})})})}